@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix fuseki: <http://jena.apache.org/fuseki#> .
@prefix tdb:     <http://jena.hpl.hp.com/2008/tdb#> .
@prefix tdb2:   <http://jena.apache.org/2016/tdb#> .
@prefix text:   <http://jena.apache.org/text#> .
@prefix skos:   <http://www.w3.org/2004/02/skos/core#> .
@prefix ja:      <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix skosxl:  <http://www.w3.org/2008/05/skos-xl#> .
@prefix agent:   <http://schema.onki.fi/agent-schema#> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/> .
@prefix spatial: <http://jena.apache.org/spatial#> .
@prefix schema:  <http://schema.org/> .
@prefix :        <#> .

# ============================
# Service 1: /judaicalink/...
# ============================
:service_jl rdf:type fuseki:Service ;
  fuseki:name "judaicalink" ;
  fuseki:serviceQuery "query" ;
  fuseki:serviceUpdate "update" ;
  fuseki:serviceReadGraphStore      "get" ;
  fuseki:serviceReadWriteGraphStore "data" ;
  fuseki:dataset :textDataset_jl ;
.

:textDataset_jl rdf:type text:TextDataset ;
  text:dataset :tdbDataset_jl ;
  text:index   :luceneIndex_jl ;
.

:tdbDataset_jl rdf:type tdb2:DatasetTDB2 ;
  tdb2:location "/fuseki-base/databases/judaicalink" ;
  # Default Graph = union(all named graphs)
  tdb2:unionDefaultGraph true ;
.

:luceneIndex_jl a text:TextIndexLucene ;
  text:directory "/fuseki-base/databases/lucene-judaicalink" ;
  text:storeValues true ;
  text:entityMap :entityMap_jl ;
.

:entityMap_jl a text:EntityMap ;
  text:entityField "uri" ;
  text:graphField  "graph" ;
  text:defaultField "text" ;
  text:uidField "uid" ;
  text:langField "lang" ;
  text:map (
    [ text:field "text" ; text:predicate skos:prefLabel ]
    [ text:field "text" ; text:predicate skos:altLabel ]
    [ text:field "text" ; text:predicate rdfs:label ]
  ) .

# ============================
# Service 2: /ontology/...
# ============================
:service_onto rdf:type fuseki:Service ;
  fuseki:name "ontology" ;
  fuseki:serviceQuery "query" ;
  fuseki:serviceUpdate "update" ;
  fuseki:serviceReadGraphStore      "get" ;
  fuseki:serviceReadWriteGraphStore "data" ;
  fuseki:dataset :textDataset_onto ;
.

:textDataset_onto rdf:type text:TextDataset ;
  text:dataset :tdbDataset_onto ;
  text:index   :luceneIndex_onto ;
.

:tdbDataset_onto rdf:type tdb2:DatasetTDB2 ;
  tdb2:location "/fuseki-base/databases/ontology" ;
.

:luceneIndex_onto a text:TextIndexLucene ;
  text:directory "/fuseki-base/databases/lucene-ontology" ;
  text:storeValues true ;
  text:entityMap :entityMap_onto ;
.

:entityMap_onto a text:EntityMap ;
  text:entityField "uri" ;
  text:graphField  "graph" ;
  text:defaultField "text" ;
  text:uidField "uid" ;
  text:langField "lang" ;
  text:map (
    [ text:field "text" ; text:predicate skos:prefLabel ]
    [ text:field "text" ; text:predicate rdfs:label ]
  ) .