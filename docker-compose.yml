version: '1'
name: 'judaicalink'
services:
  judaicalink:
      build: .
      ports:
        - "80:80"
        - "443:443"
        - "1313:1313"
        - "3030:3030"
        - "8000:8000"
        - "8001:8001"
      volumes:
        - type: volume
          source: judaicalink
          target: /data
      privileged: true

  elasticsearch:
    image: 'elasticsearch:2.4'
    ports:
      - "9200:9200"
      - "9300:9300"
    environment:
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    volumes:
      - es_data:/usr/share/elasticsearch/data

  kibana:
    image: 'kibana:4.6'
    ports:
      - "5601:5601"
    links:
      - elasticsearch
    environment:
      - "ELASTICSEARCH_URL=http://elasticsearch:9200"

volumes:
    db_data:
      driver: local

    es_data:
        driver: local

    fuseki_data:
        driver: local

    judaicalink:
        driver: local
